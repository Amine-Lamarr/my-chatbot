<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>My Chatbot</title>
  <link rel="stylesheet" href="chatstyle.css">
  
</head>
<body>
  <div class="chat-container">
    <div class="header">ðŸ¤–Amine's Agent</div>
    <div class="messages" id="messages"></div>
    <div class="input-area">
      <input type="text" id="userInput" placeholder="Type a message..." onkeydown="checkEnter(event)">
      <button onclick="sendMessage()">Send</button>
    </div>
  </div>

<script>
const messagesDiv = document.getElementById("messages");

function addMessage(text, sender) {
    const messageDiv = document.createElement("div");
    messageDiv.classList.add("message", sender);

    const avatar = document.createElement("img");
    avatar.classList.add("avatar");
    avatar.src = sender === "user" 
        ? "https://cdn-icons-png.flaticon.com/512/847/847969.png"
        : "https://cdn-icons-png.flaticon.com/512/4712/4712027.png";

    const bubble = document.createElement("div");
    bubble.classList.add("bubble");
    bubble.textContent = text;

    if (sender === "user") {
        messageDiv.appendChild(bubble);
        messageDiv.appendChild(avatar);
    } else {
        messageDiv.appendChild(avatar);
        messageDiv.appendChild(bubble);
    }

    messagesDiv.appendChild(messageDiv);
    messagesDiv.scrollTop = messagesDiv.scrollHeight;
}
async function sendQuestion(question) {
    const response = await fetch("http://127.0.0.1:8000/ask", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({question: question})
    });
    const data = await response.json();
    return data;
}
async function sendMessage() {
    const input = document.getElementById("userInput");
    const text = input.value.trim();
    if (!text) return;
    addMessage(text, "user");  
    input.value = "";
    const data = await sendQuestion(text);  // Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ RAG/DeepSeek Ø¹Ø¨Ø± FastAPI
    addMessage(data.answer, "bot");        // ÙŠØ¸Ù‡Ø± Ø§Ù„Ø¬ÙˆØ§Ø¨
}
function checkEnter(event) {
    if (event.key === "Enter") {
        sendMessage();
    }
}
</script>

  </script>
</body>
</html>
